{
  "Antd EditDrawer": {
    "prefix": "aed",
    "body": [
      "import { FormColumnType, ProForm } from '@metering-system/components'",
      "import { Button, Drawer, Form, message } from 'antd'",
      "import { useEffect, useState } from 'react'",
      "",
      "type recordType = ${1:any}",
      "",
      "interface EditGPSDrawerProps {",
      "\topen: boolean",
      "\tonClose: () => void",
      "\ttype: 'add' | 'edit'",
      "\trecord?: recordType | null",
      "\trefresh: () => void",
      "}",
      "",
      "/**",
      " * // TODO ${2:注释}(新增/编辑)",
      " */",
      "export default function EditGPSDrawer(props: EditGPSDrawerProps) {",
      "\tconst [form] = Form.useForm()",
      "\tconst [loading, setLoading] = useState(false)",
      "\tconst { open, onClose, type, record, refresh } = props",
      "",
      "\t// 表单配置",
      "\tconst columns: FormColumnType<recordType>[] = [",
      "\t\t// TODO 配置列表",
      "\t]",
      "",
      "\tuseEffect(() => {",
      "\t\tif (open) {",
      "\t\t\tform.resetFields()",
      "\t\t\tif (type === 'edit' && record) {",
      "\t\t\t\tform.setFieldsValue(record)",
      "\t\t\t}",
      "\t\t}",
      "\t}, [open, type, record, form])",
      "",
      "\t// 保存（新增/编辑）",
      "\tconst handleSubmit = async (values?: recordType) => {",
      "\t\ttry {",
      "\t\t\tsetLoading(true)",
      "\t\t\tconst formValues = values || (await form.validateFields())",
      "\t\t\tif (type === 'add') {",
      "\t\t\t\t// TODO: 新增逻辑",
      "\t\t\t} else if (type === 'edit') {",
      "\t\t\t\t// TODO: 编辑逻辑",
      "\t\t\t\tformValues.id = values.id",
      "\t\t\t}",
      "\t\t\tonClose()",
      "\t\t\trefresh()",
      "\t\t} catch (e: unknown) {",
      "\t\t\tmessage.error(e instanceof Error ? e.message : '操作失败')",
      "\t\t} finally {",
      "\t\t\tsetLoading(false)",
      "\t\t}",
      "\t}",
      "",
      "\treturn (",
      "\t\t<Drawer",
      "\t\t\topen={open}",
      "\t\t\ttitle={type === 'add' ? '新增' : '编辑'}",
      "\t\t\tonClose={onClose}",
      "\t\t\twidth={600}",
      "\t\t\tforceRender",
      "\t\t>",
      "\t\t\t<ProForm form={form} columns={columns} initialValues={record || {}} onFinish={handleSubmit} />",
      "\t\t\t<div style={{ textAlign: 'right', marginTop: 24 }}>",
      "\t\t\t\t<Button type='primary' className='mr-4' htmlType='submit' onClick={() => form.submit()} loading={loading}>",
      "\t\t\t\t\t保存",
      "\t\t\t\t</Button>",
      "\t\t\t\t<Button style={{ marginLeft: 8 }} onClick={onClose}>",
      "\t\t\t\t\t取消",
      "\t\t\t\t</Button>",
      "\t\t\t</div>",
      "\t\t</Drawer>",
      "\t)",
      "}"
    ],
    "description": "Antd 编辑抽屉组件模板"
  }
}
