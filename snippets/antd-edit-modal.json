{
  "Antd EditModal": {
    "prefix": "aem",
    "body": [
      "import { FormColumnType, ProForm, ProModal } from '@metering-system/components'",
      "import { Button, Form, message } from 'antd'",
      "import { useEffect, useState } from 'react'",
      "",
      "// TODO 类型定义",
      "type recordType = ${1:any}",
      "interface EditModalProps {",
      "\topen: boolean",
      "\tonClose: () => void",
      "\ttype: 'add' | 'edit'",
      "\trecord?: recordType | null",
      "\trefresh: () => void",
      "}",
      "",
      "/**",
      " * TODO ${2:注释}(新增/编辑)",
      " */",
      "export default function EditModal(props: EditModalProps) {",
      "\tconst [form] = Form.useForm()",
      "\tconst [loading, setLoading] = useState(false)",
      "\tconst { open, onClose, type, record, refresh } = props",
      "",
      "\t// 表单配置",
      "\tconst columns: FormColumnType<recordType>[] = [",
      "\t\t// TODO 配置字段",
      "\t]",
      "\t// 获取业务数据",
      "\tuseEffect(() => {",
      "\t\tif (open) {",
      "\t\t\tif (type === 'add') {",
      "\t\t\t\tform.setFieldsValue({})",
      "\t\t\t} else if (type === 'edit' && record) {",
      "\t\t\t\tform.setFieldsValue(record)",
      "\t\t\t} else {",
      "\t\t\t\tform.resetFields()",
      "\t\t\t}",
      "\t\t}",
      "\t}, [open, type, record, form])",
      "",
      "\t// 保存（新增/编辑）",
      "\tconst handleSubmit = async (values?: recordType) => {",
      "\t\ttry {",
      "\t\t\tsetLoading(true)",
      "\t\t\tconst formValues = values || (await form.validateFields())",
      "\t\t\tif (type === 'add') {",
      "\t\t\t\t// TODO 新增逻辑",
      "\t\t\t} else {",
      "\t\t\t\t// TODO 编辑逻辑",
      "\t\t\t\tformValues.id = values?.id // 确保传入ID",
      "\t\t\t}",
      "\t\t\tonClose()",
      "\t\t\trefresh()",
      "\t\t} catch (e: unknown) {",
      "\t\t\tmessage.error(e instanceof Error ? e.message : '操作失败')",
      "\t\t} finally {",
      "\t\t\tsetLoading(false)",
      "\t\t}",
      "\t}",
      "",
      "\treturn (",
      "\t\t<ProModal",
      "\t\t\tvisible={open}",
      "\t\t\ttitle={type === 'add' ? '新增' : '编辑'}",
      "\t\t\tonCancel={onClose}",
      "\t\t\twidth={600}",
      "\t\t\tdestroyOnClose",
      "\t\t\tfooter={null}",
      "\t\t>",
      "\t\t\t<ProForm form={form} columns={columns} initialValues={record || {}} onFinish={handleSubmit} />",
      "\t\t\t<div className='flex justify-center m-6'>",
      "\t\t\t\t<Button type='primary' className='mr-4' htmlType='submit' onClick={() => form.submit()} loading={loading}>",
      "\t\t\t\t\t保存",
      "\t\t\t\t</Button>",
      "\t\t\t\t<Button style={{ marginLeft: 8 }} onClick={onClose}>",
      "\t\t\t\t\t取消",
      "\t\t\t\t</Button>",
      "\t\t\t</div>",
      "\t\t</ProModal>",
      "\t)",
      "}"
    ],
    "description": "Antd 编辑弹窗模板"
  }
}
